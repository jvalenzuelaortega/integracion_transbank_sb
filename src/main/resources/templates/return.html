<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>

</head>
<body>
	
	<!-- Formulario de retorno que solo redirecciona al paso final -->
	<form action="#" th:action="${urlRedireccion}" method="post"
		id="returnForm">
		<input type="hidden" name="token_ws" th:value="${tokenWs}"> <br>
	</form>

	<!-- Guardar variable thymeleaf en localStorage para mostrar en paso final -->
	<script th:inline="javascript">
		//Se borra el localStorage
		window.localStorage.clear();

		//Formato variable para Thymeleaf -> var myVariable = /*[[${myVariabel}]]*/ 'default';
		var authorizationCode = /*[[${authorizationCode}]]*/ 'default';
		var amount = /*[[${amount}]]*/ 'default';
		var responseCode = /*[[${responseCode}]]*/ 'default';
		
		//Se crea el item en el localStorage para pasar parametros
		window.localStorage.setItem("authorizationCode", authorizationCode);
		window.localStorage.setItem("amount", amount);
		window.localStorage.setItem("responseCode", responseCode);

		//Se envia el formulario
		document.getElementById('returnForm').submit();
	</script>

</body>
</html>